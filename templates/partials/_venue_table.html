<div
	class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"
>
	<!-- Venue Header -->
	<div class="px-5 py-4 border-b border-gray-100">
		<div class="flex justify-between items-center">
			<div class="flex items-center gap-4">
				{% if venue.venue_image %}
				<div class="w-16 h-12 rounded-lg bg-neutral-700 px-2">
					<img
						src="{{ venue.venue_image }}"
						alt="{{ venue.venue_name }}"
						class="w-full h-full rounded-lg object-contain"
					/>
				</div>
				{% endif %}
				<div>
					<h3 class="text-lg font-semibold text-gray-900">
						{{ venue.venue_name }}
					</h3>
					<a
						href="{{ venue.venue_url }}"
						target="_blank"
						class="text-sm text-blue-600 hover:underline"
					>
						Atidaryti svetainę →
					</a>
				</div>
			</div>
			<div class="flex items-center gap-3">
				{% if venue.error %}
				<span
					class="px-3 py-1 text-xs font-medium bg-red-100 text-red-700 rounded-full"
				>
					Klaida
				</span>
				{% elif venue.has_availability %}
				<span
					class="px-3 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full"
				>
					{{ venue.available_count }} laisvi
				</span>
				{% else %}
				<span
					class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full"
				>
					Nėra laisvų
				</span>
				{% endif %}
			</div>
		</div>
	</div>

	<!-- Table Content -->
	<div class="overflow-x-auto">
		{% if venue.error %}
		<div class="px-5 py-8 text-center">
			<p class="text-sm text-red-600">{{ venue.error }}</p>
		</div>
		{% elif courts %}
		<table class="w-full text-sm">
			<thead>
				<tr class="bg-gray-50 border-b border-gray-200">
					<th
						class="sticky left-0 z-10 bg-gray-50 px-4 py-3 text-left font-semibold text-gray-700 min-w-[140px] border-r border-gray-200"
					>
						Aikštelė
					</th>
					{% for time in time_columns %}
					<th
						class="px-1 py-3 text-center font-medium text-gray-600 min-w-[50px] text-xs"
					>
						{{ time }}
					</th>
					{% endfor %}
				</tr>
			</thead>
			<tbody>
				{% for court in courts %}
				<tr class="border-b border-gray-100 hover:bg-gray-50/50">
					<td
						class="sticky left-0 z-10 bg-white px-4 py-2 font-medium text-gray-900 whitespace-nowrap border-r border-gray-200"
					>
						{{ court or 'Aikštelė' }}
					</td>
					{% for time in time_columns %} {% set slot_price =
					slot_prices.get((court or 'Aikštelė') ~ '|' ~ time) %} {% if
					(court, time) in availability %}
					<td class="px-1 py-1 text-center">
						<div
							class="w-9 h-7 mx-auto rounded bg-green-500 hover:bg-green-400 cursor-pointer transition-colors flex items-center justify-center"
						>
							{% if slot_price %}
							<span class="text-xs font-medium text-white"
								>{{slot_price}}€</span
							>
							{% endif %}
						</div>
					</td>
					{% else %}
					<td class="px-1 py-1 text-center">
						<div
							class="w-9 h-7 mx-auto rounded bg-gray-100 flex items-center justify-center"
						>
							<span class="text-gray-300 text-xs">✕</span>
						</div>
					</td>
					{% endif %} {% endfor %}
				</tr>
				{% endfor %}
			</tbody>
		</table>
		{% else %}
		<div class="px-5 py-8 text-center">
			<p class="text-sm text-gray-500">Šiai dienai nėra laisvų laikų.</p>
		</div>
		{% endif %}
	</div>
</div>
